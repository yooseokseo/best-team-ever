<title>Home</title>
</head>

<body>
  {{>navigation}} {{>nonscript}}
  
  <!-- make POST request if user access page with GET request (via url) -->
  {{>post}}

  {{>history_modal}}

  <!-- profile drop down menu -->
  <div class="user-profile-container flex-center">
    <div class="user-profile-content-container">
      <div class="profile-list-container">

        <!-- for default user profile-->
        <div id="default-user-profile" class="user-profile-name-box page-title">


        </div>
        <hr>

      </div>
      <div class="btn flex-center">
        <a onclick="post('/addNewProfile')">Add New Profile</a>

      </div>
      <div class="btn flex-center">
        <a onclick="post('/viewProfiles')">View All Profiles</a>
      </div>
    </div>

  </div>


  <p id="profile_id" style="display:none" >{{id}}</p>


  <div id="home-content-container">
    <div id="home-content-title" class="home-title">
      Today
    </div>


    <!-- Yesterday's medication -->
    <div id="med-list-container-yesterday" style="display:none">
      <!-- Show list of yesterday's medicine if any exists -->
      {{#each yesterdayMed}}
        {{#each values}}
          <a onclick="showModal('{{medicinename}}','{{medicine_id}}');">
            <div class="view-pill-history-box border-black">

              <!-- pill image -->
              <div class="view-pill-history-info">
                <img class="pill-icon-img" src="/images/icons/pills/{{med_pic}}" onerror="this.src='/images/icons/pill.svg'" /> {{medicinename}}
              </div>

              <div class="view-pill-history-end flex-center"> {{time}} </div>

              <!-- checkbox for whether pill has been taken -->
              <div class="isTaken flex-center" style="display:none">{{isTaken}} </div>
              <div class="isTakenImage-yes notShown">
                <img width="40vw" src="/images/icons/checked-checkbox-96.png" alt="">
              </div>
              <div class="isTakenImage-no notShown">
                <img width="40vw" src="/images/icons/unchecked-checkbox-96.png" alt="">
              </div>

            </div>
          </a>
        {{/each}}
      {{/each}}

      <!-- Show message for no medicine today -->
      {{#unless yesterdayMed}}
        You had no medication yesterday
      {{/unless}}
    </div>


    <!-- Today's medication -->
    <div id="med-list-container-today">

      <!-- Show list of today's medicine if any exists -->
      {{#each todayMed}}
        {{#each values}}
          <a onclick="showModal('{{medicinename}}','{{medicine_id}}');">
            <div class="view-pill-history-box border-black">

              <!-- pill image -->
              <div class="view-pill-history-info">
                <img class="pill-icon-img" src="/images/icons/pills/{{med_pic}}" onerror="this.src='/images/icons/pill.svg'" /> {{medicinename}}
              </div>

              <div class="view-pill-history-end flex-center"> {{time}} </div>

              <!-- checkbox for whether pill has been taken -->
              <div class="isTaken flex-center" style="display:none">{{isTaken}} </div>
              <div class="isTakenImage-yes notShown">
                <img width="40vw" src="/images/icons/checked-checkbox-96.png" alt="">
              </div>
              <div class="isTakenImage-no notShown">
                <img width="40vw" src="/images/icons/unchecked-checkbox-96.png" alt="">
              </div>

            </div>
          </a>
        {{/each}}
      {{/each}}

      <!-- Show message for no medicine today -->
      {{#unless todayMed}}
        You have no medication today
      {{/unless}}

    </div>

    <!-- Tomorrow's medication -->
    <div id="med-list-container-tomorrow" style="display:none">
      <!-- Show list of yesterday's medicine if any exists -->
      {{#each tomorrowMed}}
        {{#each values}}
          <a onclick="showModal('{{medicinename}}','{{medicine_id}}');">
            <div class="view-pill-history-box border-black">

              <!-- pill image -->
              <div class="view-pill-history-info">
                <img class="pill-icon-img" src="/images/icons/pills/{{med_pic}}" onerror="this.src='/images/icons/pill.svg'" /> {{medicinename}}
              </div>

              <div class="view-pill-history-end flex-center"> {{time}} </div>

              <!-- checkbox for whether pill has been taken -->
              <div class="isTaken flex-center" style="display:none">{{isTaken}} </div>
              <div class="isTakenImage-yes notShown">
                <img width="40vw" src="/images/icons/checked-checkbox-96.png" alt="">
              </div>
              <div class="isTakenImage-no notShown">
                <img width="40vw" src="/images/icons/unchecked-checkbox-96.png" alt="">
              </div>

            </div>
          </a>
        {{/each}}
      {{/each}}

      <!-- Show message for no medicine today -->
      {{#unless tomorrowMed}}
        You have have no medication tomorrow
      {{/unless}}
    </div>

    


 
    <div id="home-btns-container">
      <div id="view-all-btn" class="home-btn home-btns flex-center">
        <a id="view-all-btn-a" onclick="viewAllMed()">View All</a></div>
      <div id="add-new-btn" class="home-btn home-btns flex-center">
        <a onclick='addNewMed()'>Add New</a>
      </div>
    </div>
  </div>

  <div id="date-container">
    <div id="date-prev" class="flex-center date">
      {{yesterday}}
    </div>
    <div id="date-today" class="flex-center date current-day">
      {{today}}
    </div>
    <div id="date-next" class="flex-center date">
      {{tomorrow}}
    </div>
  </div>

  </div>

  <script src="/js/home.js"></script>
  <script src="/js/history.js"/>
  {{>script}}
